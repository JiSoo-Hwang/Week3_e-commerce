# Milestone 계획: 이커머스 API 개발 프로젝트

## 1. 프로젝트 개요
- **프로젝트명**: 이커머스 API 개발
- **목표**: RESTful API, Clean Architecture 설계 및 구현을 통해
- 상품, 주문, 쿠폰, 결제 등의 주요 기능을 제공.
- **주요 기술**:
    - **프레임워크**: Spring Boot
    - **데이터베이스**: MySQL (JPA 활용)
    - **테스트**: JUnit 5, AssertJ
- **주요 기능**:
    1. 상품 조회 및 주문
    2. 잔액 충전 및 결제
    3. 쿠폰 발급 및 관리
    4. 인기 판매 상품 조회
    5. 데이터 분석 전송 API
- **추가 구현 목표**:
    1. 주문 및 쿠폰 발급 시 동시성 제어
    2. 장바구니 기능 구현 (고도화 단계)

---

## 2. Milestone 1: 설계 및 기초 환경 설정 (완료)
- **기간**: ~현재
- **목표**:
    - 요구사항 분석 및 API 설계 완료.
    - ERD 작성 및 주요 엔터티 설계.
    - Docker 기반 MySQL 환경 설정.
    - Spring Boot 프로젝트 초기 구성.
- **결과물**:
    - API 설계 문서 및 ERD
    - `docker-compose.yml` 기반 데이터베이스 실행
    - Spring Boot 초기 프로젝트 세팅

---

## 3. Milestone 2: 주요 기능 구현
- **기간**: [1주차 구현 기간]
- **목표**:
    - 각 API 기능 구현 완료.
    - JPA를 활용한 데이터베이스 연동. 
    - 주문 및 쿠폰 발급 시 동시성 제어 적용.
    - 단위 테스트 및 통합 테스트를 통해 API 안정성 검증.
 
- **작업 목록**:
    1. **상품 관련 기능**:
        - 상품 조회 (페이징 처리)
        - 인기 판매 상품 조회
        - **테스트**:
            - 상품 조회 기능에 대한 단위 테스트 작성.
            - 통합 테스트로 전체 상품 조회 흐름 검증.
    2. **주문 및 결제 기능**:
        - 주문 생성 및 결제 처리
        - 잔액 충전 및 잔액 조회
        - 여러 고객이 동일한 상품 구매 시 동시성 제어
        - **테스트**:
            - 단위 테스트: 결제 로직 및 잔액 계산 검증.
            - 통합 테스트: 주문 생성, 결제 처리, 데이터베이스 연동 검증.
    3. **쿠폰 관리 기능**:
        - 쿠폰 발급 및 보유 쿠폰 조회
        - 선착순 쿠폰 발급 시 동시성 제어
        - **테스트**:
            - 단위 테스트: 쿠폰 발급 로직 검증.
            - 통합 테스트: 선착순 쿠폰 발급 시 동시성 제어 검증.
    4. **데이터 분석 전송**:
        - 결제 성공 시 데이터 플랫폼 전송 API
        - **테스트**:
            - 단위 테스트: 데이터 전송 로직 검증.
            - 통합 테스트: 결제 완료 후 데이터 전송 흐름 검증.
- **결과물**:
    - JPA 엔터티 및 Repository 구현.
    - 각 API의 컨트롤러, 서비스, 레포지토리 작성.
    - JUnit/AssertJ를 활용한 단위 테스트 및 통합 테스트 코드 작성.

---

## 4. Milestone 3: 기능 고도화
- **기간**: [2주차 고도화 기간]
- **목표**:
    - 기존 기능 최적화 및 코드 품질 개선.
    - 장바구니 기능 구현 및 추가 API 제공.
    - 성능 향상을 위한 데이터베이스 쿼리 최적화(?)
- **작업 목록**:
    1. **성능 개선**:
        - 상품 및 주문 관련 쿼리 최적화.
        - 인기 상품 조회 캐싱 적용.
    2. **코드 품질 개선**:
        - 서비스와 컨트롤러 계층 간 의존성 명확화.
        - 예외 처리 표준화 및 공통 에러 응답 포맷 정의.
    3. **장바구니 기능**:
        - 장바구니 생성 및 상품 추가/삭제 API 구현.
        - 장바구니를 주문으로 전환하는 기능 제공.
        - **테스트**:
            - 단위 테스트: 장바구니 추가/삭제 로직 검증.
            - 통합 테스트: 장바구니에서 주문으로 전환하는 흐름 검증.
    4. **테스트 확장**:
        - 대량 데이터 테스트 및 성능 검증.
- **결과물**:
    - 최적화된 코드 및 데이터베이스.
    - 장바구니 API 구현 및 테스트 완료.
    - 성능 테스트 결과 보고서.

---

## 5. 주요 일정
| **날짜**                | **내용**                       | **세부 작업**                                  |
|-------------------------|-------------------------------|-----------------------------------------------|
| [오늘 ~ +7일]           | 주요 기능 구현                 | 각 API 기능 구현 및 JUnit/통합 테스트            |
| [+7일 ~ +14일]          | 고도화 및 최적화               | 쿼리 최적화, 성능 개선, 장바구니 기능 구현      |
| [+14일 이후]            | 테스트 및 검증                 | 장바구니 API 및 성능 테스트                    |

---

## 6. 예상 이슈 및 해결 방안
### 예상 이슈
1. **동시성 처리**:
    - 여러 고객이 동일 상품을 주문하거나 선착순 쿠폰 발급 시 동시성 문제가 발생할 가능성.
    - **해결 방안**:
        - 상품 주문 및 쿠폰 발급 시 비관적 락(Pessimistic Lock) 적용
        
2. **성능 이슈**:
    - 대량 데이터 처리 시 성능 저하.
    - **해결 방안**:
        - 캐싱 및 적절한 인덱스 설계.
        - unique 제약 조건을 활용한 성능향상
        - 인기 상품 조회 쿼리 개선.
3. **테스트 데이터 부족**:
    - 충분한 테스트 데이터를 준비해야 할 필요.
    - **해결 방안**:
        - SQL 스크립트로 데이터 초기화.

---

### 결과물 제출 방식
1. **Milestone 계획서**: 본 `.md` 파일 제출.
2. **GitHub Milestones**: 각 단계별 작업을 이슈와 연결하여 관리.